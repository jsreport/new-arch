const { getCallback } = require('./registryUtils')

module.exports = (registry) => {
  return {
    collection: (name) => ({
      find: (q, req) => getCallback(registry, req)({
        action: 'documentStore.collection.find',
        requestRootId: req.context.rootId,
        data: {
          query: q,
          collection: name
        }
      }),
      findOne: (q, req) => getCallback(registry, req)({
        action: 'documentStore.collection.findOne',
        requestRootId: req.context.rootId,
        data: {
          query: q,
          collection: name,
        }
      })
    })
  }
}
