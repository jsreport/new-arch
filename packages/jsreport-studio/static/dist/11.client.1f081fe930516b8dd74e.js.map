{"version":3,"sources":["webpack:///./node_modules/monaco-editor/esm/vs/language/typescript/workerManager.js","webpack:///./node_modules/monaco-editor/esm/vs/language/typescript/languageFeatures.js","webpack:///./node_modules/monaco-editor/esm/vs/language/typescript/tsMode.js"],"names":["extendStatics","IndentStyle","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","this","n","v","op","TypeError","call","pop","length","push","WorkerManager","modeId","defaults","_this","_modeId","_defaults","_worker","_client","_configChangeListener","onDidChange","_stopWorker","_updateExtraLibsToken","_extraLibsChangeListener","onDidExtraLibsChange","_updateExtraLibs","prototype","dispose","myToken","proxy","_a","getProxy","updateExtraLibs","getExtraLibs","_getClient","monaco","editor","createWebWorker","moduleId","keepIdleModels","createData","compilerOptions","getCompilerOptions","extraLibs","p","getEagerModelSync","worker","withSyncedResources","getModels","filter","model","getModeId","map","uri","getLanguageServiceWorker","resources","_i","arguments","client","__extends","d","b","Object","setPrototypeOf","__proto__","Array","hasOwnProperty","__","constructor","create","languageFeatures_awaiter","languageFeatures_generator","Uri","Range","flattenDiagnosticMessageText","diag","newLine","indent","undefined","i","messageText","displayPartsToString","displayParts","displayPart","text","join","DiagnosticCategory","Adapter","_textSpanToRange","span","p1","getPositionAt","start","p2","startLineNumber","lineNumber","startColumn","column","endLineNumber","endColumn","DiagnosticsAdapter","_super","_selector","_disposables","_listener","onModelAdd","handle","changeSubscription","onDidChangeContent","clearTimeout","setTimeout","_doValidate","toString","onModelRemoved","setModelMarkers","key","onDidCreateModel","onWillDisposeModel","onDidChangeModelLanguage","event","recomputeDiagostics","forEach","promises","noSyntaxValidation","noSemanticValidation","noSuggestionDiagnostics","diagnostics","markers","_b","isDisposed","getDiagnosticsOptions","getSyntacticDiagnostics","getSemanticDiagnostics","getSuggestionDiagnostics","all","reduce","c","concat","diagnosticCodesToIgnore","indexOf","code","_convertDiagnostics","diagStart","diagLength","severity","_tsDiagnosticCategoryToMarkerSeverity","category","message","tags","reportsUnnecessary","MarkerTag","Unnecessary","relatedInformation","_convertRelatedInformation","info","relatedResource","file","relatedResourceUri","parse","fileName","getModel","infoStart","infoLength","resource","Error","MarkerSeverity","Message","Info","Warning","Suggestion","Hint","SuggestAdapter","defineProperty","get","enumerable","configurable","provideCompletionItems","position","_context","token","wordInfo","wordRange","offset","getWordUntilPosition","getOffsetAt","getCompletionsAtPosition","suggestions","entries","entry","range","replacementSpan","name","insertText","sortText","kind","convertKind","resolveCompletionItem","_position","item","myItem","details","getCompletionEntryDetails","detail","documentation","Kind","primitiveType","keyword","languages","CompletionItemKind","Keyword","variable","localVariable","Variable","memberVariable","memberGetAccessor","memberSetAccessor","Field","function","memberFunction","constructSignature","callSignature","indexSignature","Function","enum","Enum","module","Module","class","Class","interface","Interface","warning","File","Property","SignatureHelpAdapter","signatureHelpTriggerCharacters","provideSignatureHelp","ret","getSignatureHelpItems","activeSignature","selectedItemIndex","activeParameter","argumentIndex","signatures","items","signature","parameters","prefixDisplayParts","a","parameter","separatorDisplayParts","suffixDisplayParts","QuickInfoAdapter","provideHover","contents","getQuickInfoAtPosition","tag","match","textSpan","OccurrencesAdapter","provideDocumentHighlights","getOccurrencesAtPosition","isWriteAccess","DocumentHighlightKind","Write","Text","DefinitionAdapter","provideDefinition","entries_1","refModel","getDefinitionAtPosition","ReferenceAdapter","provideReferences","context","entries_2","getReferencesAtPosition","OutlineAdapter","provideDocumentSymbols","convert","getNavigationBarItems","bucket","containerLabel","outlineTypeTable","SymbolKind","spans","selectionRange","containerName","childItems","child","unknown","script","type","localFunction","constructorImplementation","typeParameter","alias","const","let","Method","javaScriptWorker","typeScriptWorker","FormatHelper","_convertOptions","options","ConvertTabsToSpaces","insertSpaces","TabSize","tabSize","IndentSize","Smart","NewLineCharacter","InsertSpaceAfterCommaDelimiter","InsertSpaceAfterSemicolonInForStatements","InsertSpaceBeforeAndAfterBinaryOperators","InsertSpaceAfterKeywordsInControlFlowStatements","InsertSpaceAfterFunctionKeywordForAnonymousFunctions","InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis","InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets","InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces","PlaceOpenBraceOnNewLineForControlBlocks","PlaceOpenBraceOnNewLineForFunctions","_convertTextChanges","change","newText","FormatAdapter","provideDocumentRangeFormattingEdits","startOffset","endOffset","edits","getFormattingEditsForRange","edit","FormatOnTypeAdapter","provideOnTypeFormattingEdits","ch","getFormattingEditsAfterKeystroke","CodeActionAdaptor","provideCodeActions","end","formatOptions","errorCodes","codeFixes","getOptions","m","Number","getCodeFixesAtPosition","actions","fix","changes","isNewFile","_tsCodeFixActionToMonacoCodeAction","codeFix","_c","textChanges","textChange","title","description","RenameAdapter","provideRenameEdits","newName","renameInfo","renameLocations","renameLocations_1","renameLocation","getRenameInfo","allowRenameOfImportPath","canRename","rejectReason","localizedErrorMessage","fileToRename","findRenameLocations","setupTypeScript","setupMode","setupJavaScript","getJavaScriptWorker","getTypeScriptWorker","uris","registerCompletionItemProvider","registerSignatureHelpProvider","registerHoverProvider","registerDocumentHighlightProvider","registerDefinitionProvider","registerReferenceProvider","registerDocumentSymbolProvider","registerDocumentRangeFormattingEditProvider","registerOnTypeFormattingEditProvider","registerCodeActionProvider","registerRenameProvider","__webpack_require__","__webpack_exports__"],"mappings":"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","file":"11.client.1f081fe930516b8dd74e.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar WorkerManager = /** @class */ (function () {\r\n    function WorkerManager(modeId, defaults) {\r\n        var _this = this;\r\n        this._modeId = modeId;\r\n        this._defaults = defaults;\r\n        this._worker = null;\r\n        this._client = null;\r\n        this._configChangeListener = this._defaults.onDidChange(function () { return _this._stopWorker(); });\r\n        this._updateExtraLibsToken = 0;\r\n        this._extraLibsChangeListener = this._defaults.onDidExtraLibsChange(function () { return _this._updateExtraLibs(); });\r\n    }\r\n    WorkerManager.prototype._stopWorker = function () {\r\n        if (this._worker) {\r\n            this._worker.dispose();\r\n            this._worker = null;\r\n        }\r\n        this._client = null;\r\n    };\r\n    WorkerManager.prototype.dispose = function () {\r\n        this._configChangeListener.dispose();\r\n        this._extraLibsChangeListener.dispose();\r\n        this._stopWorker();\r\n    };\r\n    WorkerManager.prototype._updateExtraLibs = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var myToken, proxy;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this._worker) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        myToken = ++this._updateExtraLibsToken;\r\n                        return [4 /*yield*/, this._worker.getProxy()];\r\n                    case 1:\r\n                        proxy = _a.sent();\r\n                        if (this._updateExtraLibsToken !== myToken) {\r\n                            // avoid multiple calls\r\n                            return [2 /*return*/];\r\n                        }\r\n                        proxy.updateExtraLibs(this._defaults.getExtraLibs());\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WorkerManager.prototype._getClient = function () {\r\n        var _this = this;\r\n        if (!this._client) {\r\n            this._worker = monaco.editor.createWebWorker({\r\n                // module that exports the create() method and returns a `TypeScriptWorker` instance\r\n                moduleId: 'vs/language/typescript/tsWorker',\r\n                label: this._modeId,\r\n                keepIdleModels: true,\r\n                // passed in to the create() method\r\n                createData: {\r\n                    compilerOptions: this._defaults.getCompilerOptions(),\r\n                    extraLibs: this._defaults.getExtraLibs()\r\n                }\r\n            });\r\n            var p = this._worker.getProxy();\r\n            if (this._defaults.getEagerModelSync()) {\r\n                p = p.then(function (worker) {\r\n                    if (_this._worker) {\r\n                        return _this._worker.withSyncedResources(monaco.editor.getModels()\r\n                            .filter(function (model) { return model.getModeId() === _this._modeId; })\r\n                            .map(function (model) { return model.uri; }));\r\n                    }\r\n                    return worker;\r\n                });\r\n            }\r\n            this._client = p;\r\n        }\r\n        return this._client;\r\n    };\r\n    WorkerManager.prototype.getLanguageServiceWorker = function () {\r\n        var _this = this;\r\n        var resources = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            resources[_i] = arguments[_i];\r\n        }\r\n        var _client;\r\n        return this._getClient().then(function (client) {\r\n            _client = client;\r\n        }).then(function (_) {\r\n            if (_this._worker) {\r\n                return _this._worker.withSyncedResources(resources);\r\n            }\r\n        }).then(function (_) { return _client; });\r\n    };\r\n    return WorkerManager;\r\n}());\r\nexport { WorkerManager };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar Uri = monaco.Uri;\r\nvar Range = monaco.Range;\r\n//#region utils copied from typescript to prevent loading the entire typescriptServices ---\r\nvar IndentStyle;\r\n(function (IndentStyle) {\r\n    IndentStyle[IndentStyle[\"None\"] = 0] = \"None\";\r\n    IndentStyle[IndentStyle[\"Block\"] = 1] = \"Block\";\r\n    IndentStyle[IndentStyle[\"Smart\"] = 2] = \"Smart\";\r\n})(IndentStyle || (IndentStyle = {}));\r\nexport function flattenDiagnosticMessageText(diag, newLine, indent) {\r\n    if (indent === void 0) { indent = 0; }\r\n    if (typeof diag === \"string\") {\r\n        return diag;\r\n    }\r\n    else if (diag === undefined) {\r\n        return \"\";\r\n    }\r\n    var result = \"\";\r\n    if (indent) {\r\n        result += newLine;\r\n        for (var i = 0; i < indent; i++) {\r\n            result += \"  \";\r\n        }\r\n    }\r\n    result += diag.messageText;\r\n    indent++;\r\n    if (diag.next) {\r\n        for (var _i = 0, _a = diag.next; _i < _a.length; _i++) {\r\n            var kid = _a[_i];\r\n            result += flattenDiagnosticMessageText(kid, newLine, indent);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction displayPartsToString(displayParts) {\r\n    if (displayParts) {\r\n        return displayParts.map(function (displayPart) { return displayPart.text; }).join(\"\");\r\n    }\r\n    return \"\";\r\n}\r\n//#endregion\r\nvar Adapter = /** @class */ (function () {\r\n    function Adapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    // protected _positionToOffset(model: monaco.editor.ITextModel, position: monaco.IPosition): number {\r\n    // \treturn model.getOffsetAt(position);\r\n    // }\r\n    // protected _offsetToPosition(model: monaco.editor.ITextModel, offset: number): monaco.IPosition {\r\n    // \treturn model.getPositionAt(offset);\r\n    // }\r\n    Adapter.prototype._textSpanToRange = function (model, span) {\r\n        var p1 = model.getPositionAt(span.start);\r\n        var p2 = model.getPositionAt(span.start + span.length);\r\n        var startLineNumber = p1.lineNumber, startColumn = p1.column;\r\n        var endLineNumber = p2.lineNumber, endColumn = p2.column;\r\n        return { startLineNumber: startLineNumber, startColumn: startColumn, endLineNumber: endLineNumber, endColumn: endColumn };\r\n    };\r\n    return Adapter;\r\n}());\r\nexport { Adapter };\r\n// --- diagnostics --- ---\r\nvar DiagnosticCategory;\r\n(function (DiagnosticCategory) {\r\n    DiagnosticCategory[DiagnosticCategory[\"Warning\"] = 0] = \"Warning\";\r\n    DiagnosticCategory[DiagnosticCategory[\"Error\"] = 1] = \"Error\";\r\n    DiagnosticCategory[DiagnosticCategory[\"Suggestion\"] = 2] = \"Suggestion\";\r\n    DiagnosticCategory[DiagnosticCategory[\"Message\"] = 3] = \"Message\";\r\n})(DiagnosticCategory || (DiagnosticCategory = {}));\r\nvar DiagnosticsAdapter = /** @class */ (function (_super) {\r\n    __extends(DiagnosticsAdapter, _super);\r\n    function DiagnosticsAdapter(_defaults, _selector, worker) {\r\n        var _this = _super.call(this, worker) || this;\r\n        _this._defaults = _defaults;\r\n        _this._selector = _selector;\r\n        _this._disposables = [];\r\n        _this._listener = Object.create(null);\r\n        var onModelAdd = function (model) {\r\n            if (model.getModeId() !== _selector) {\r\n                return;\r\n            }\r\n            var handle;\r\n            var changeSubscription = model.onDidChangeContent(function () {\r\n                clearTimeout(handle);\r\n                handle = setTimeout(function () { return _this._doValidate(model); }, 500);\r\n            });\r\n            _this._listener[model.uri.toString()] = {\r\n                dispose: function () {\r\n                    changeSubscription.dispose();\r\n                    clearTimeout(handle);\r\n                }\r\n            };\r\n            _this._doValidate(model);\r\n        };\r\n        var onModelRemoved = function (model) {\r\n            monaco.editor.setModelMarkers(model, _this._selector, []);\r\n            var key = model.uri.toString();\r\n            if (_this._listener[key]) {\r\n                _this._listener[key].dispose();\r\n                delete _this._listener[key];\r\n            }\r\n        };\r\n        _this._disposables.push(monaco.editor.onDidCreateModel(onModelAdd));\r\n        _this._disposables.push(monaco.editor.onWillDisposeModel(onModelRemoved));\r\n        _this._disposables.push(monaco.editor.onDidChangeModelLanguage(function (event) {\r\n            onModelRemoved(event.model);\r\n            onModelAdd(event.model);\r\n        }));\r\n        _this._disposables.push({\r\n            dispose: function () {\r\n                for (var _i = 0, _a = monaco.editor.getModels(); _i < _a.length; _i++) {\r\n                    var model = _a[_i];\r\n                    onModelRemoved(model);\r\n                }\r\n            }\r\n        });\r\n        var recomputeDiagostics = function () {\r\n            // redo diagnostics when options change\r\n            for (var _i = 0, _a = monaco.editor.getModels(); _i < _a.length; _i++) {\r\n                var model = _a[_i];\r\n                onModelRemoved(model);\r\n                onModelAdd(model);\r\n            }\r\n        };\r\n        _this._disposables.push(_this._defaults.onDidChange(recomputeDiagostics));\r\n        _this._disposables.push(_this._defaults.onDidExtraLibsChange(recomputeDiagostics));\r\n        monaco.editor.getModels().forEach(onModelAdd);\r\n        return _this;\r\n    }\r\n    DiagnosticsAdapter.prototype.dispose = function () {\r\n        this._disposables.forEach(function (d) { return d && d.dispose(); });\r\n        this._disposables = [];\r\n    };\r\n    DiagnosticsAdapter.prototype._doValidate = function (model) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var worker, promises, _a, noSyntaxValidation, noSemanticValidation, noSuggestionDiagnostics, diagnostics, markers;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, this._worker(model.uri)];\r\n                    case 1:\r\n                        worker = _b.sent();\r\n                        if (model.isDisposed()) {\r\n                            // model was disposed in the meantime\r\n                            return [2 /*return*/];\r\n                        }\r\n                        promises = [];\r\n                        _a = this._defaults.getDiagnosticsOptions(), noSyntaxValidation = _a.noSyntaxValidation, noSemanticValidation = _a.noSemanticValidation, noSuggestionDiagnostics = _a.noSuggestionDiagnostics;\r\n                        if (!noSyntaxValidation) {\r\n                            promises.push(worker.getSyntacticDiagnostics(model.uri.toString()));\r\n                        }\r\n                        if (!noSemanticValidation) {\r\n                            promises.push(worker.getSemanticDiagnostics(model.uri.toString()));\r\n                        }\r\n                        if (!noSuggestionDiagnostics) {\r\n                            promises.push(worker.getSuggestionDiagnostics(model.uri.toString()));\r\n                        }\r\n                        return [4 /*yield*/, Promise.all(promises)];\r\n                    case 2:\r\n                        diagnostics = _b.sent();\r\n                        if (!diagnostics || model.isDisposed()) {\r\n                            // model was disposed in the meantime\r\n                            return [2 /*return*/];\r\n                        }\r\n                        markers = diagnostics\r\n                            .reduce(function (p, c) { return c.concat(p); }, [])\r\n                            .filter(function (d) { return (_this._defaults.getDiagnosticsOptions().diagnosticCodesToIgnore || []).indexOf(d.code) === -1; })\r\n                            .map(function (d) { return _this._convertDiagnostics(model, d); });\r\n                        monaco.editor.setModelMarkers(model, this._selector, markers);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    DiagnosticsAdapter.prototype._convertDiagnostics = function (model, diag) {\r\n        var diagStart = diag.start || 0;\r\n        var diagLength = diag.length || 1;\r\n        var _a = model.getPositionAt(diagStart), startLineNumber = _a.lineNumber, startColumn = _a.column;\r\n        var _b = model.getPositionAt(diagStart + diagLength), endLineNumber = _b.lineNumber, endColumn = _b.column;\r\n        return {\r\n            severity: this._tsDiagnosticCategoryToMarkerSeverity(diag.category),\r\n            startLineNumber: startLineNumber,\r\n            startColumn: startColumn,\r\n            endLineNumber: endLineNumber,\r\n            endColumn: endColumn,\r\n            message: flattenDiagnosticMessageText(diag.messageText, '\\n'),\r\n            code: diag.code.toString(),\r\n            tags: diag.reportsUnnecessary ? [monaco.MarkerTag.Unnecessary] : [],\r\n            relatedInformation: this._convertRelatedInformation(model, diag.relatedInformation),\r\n        };\r\n    };\r\n    DiagnosticsAdapter.prototype._convertRelatedInformation = function (model, relatedInformation) {\r\n        if (!relatedInformation) {\r\n            return;\r\n        }\r\n        var result = [];\r\n        relatedInformation.forEach(function (info) {\r\n            var relatedResource = model;\r\n            if (info.file) {\r\n                var relatedResourceUri = monaco.Uri.parse(info.file.fileName);\r\n                relatedResource = monaco.editor.getModel(relatedResourceUri);\r\n            }\r\n            if (!relatedResource) {\r\n                return;\r\n            }\r\n            var infoStart = info.start || 0;\r\n            var infoLength = info.length || 1;\r\n            var _a = relatedResource.getPositionAt(infoStart), startLineNumber = _a.lineNumber, startColumn = _a.column;\r\n            var _b = relatedResource.getPositionAt(infoStart + infoLength), endLineNumber = _b.lineNumber, endColumn = _b.column;\r\n            result.push({\r\n                resource: relatedResource.uri,\r\n                startLineNumber: startLineNumber,\r\n                startColumn: startColumn,\r\n                endLineNumber: endLineNumber,\r\n                endColumn: endColumn,\r\n                message: flattenDiagnosticMessageText(info.messageText, '\\n')\r\n            });\r\n        });\r\n        return result;\r\n    };\r\n    DiagnosticsAdapter.prototype._tsDiagnosticCategoryToMarkerSeverity = function (category) {\r\n        switch (category) {\r\n            case DiagnosticCategory.Error: return monaco.MarkerSeverity.Error;\r\n            case DiagnosticCategory.Message: return monaco.MarkerSeverity.Info;\r\n            case DiagnosticCategory.Warning: return monaco.MarkerSeverity.Warning;\r\n            case DiagnosticCategory.Suggestion: return monaco.MarkerSeverity.Hint;\r\n        }\r\n        return monaco.MarkerSeverity.Info;\r\n    };\r\n    return DiagnosticsAdapter;\r\n}(Adapter));\r\nexport { DiagnosticsAdapter };\r\nvar SuggestAdapter = /** @class */ (function (_super) {\r\n    __extends(SuggestAdapter, _super);\r\n    function SuggestAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(SuggestAdapter.prototype, \"triggerCharacters\", {\r\n        get: function () {\r\n            return ['.'];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SuggestAdapter.prototype.provideCompletionItems = function (model, position, _context, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var wordInfo, wordRange, resource, offset, worker, info, suggestions;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        wordInfo = model.getWordUntilPosition(position);\r\n                        wordRange = new Range(position.lineNumber, wordInfo.startColumn, position.lineNumber, wordInfo.endColumn);\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getCompletionsAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        info = _a.sent();\r\n                        if (!info || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        suggestions = info.entries.map(function (entry) {\r\n                            var range = wordRange;\r\n                            if (entry.replacementSpan) {\r\n                                var p1 = model.getPositionAt(entry.replacementSpan.start);\r\n                                var p2 = model.getPositionAt(entry.replacementSpan.start + entry.replacementSpan.length);\r\n                                range = new Range(p1.lineNumber, p1.column, p2.lineNumber, p2.column);\r\n                            }\r\n                            return {\r\n                                uri: resource,\r\n                                position: position,\r\n                                range: range,\r\n                                label: entry.name,\r\n                                insertText: entry.name,\r\n                                sortText: entry.sortText,\r\n                                kind: SuggestAdapter.convertKind(entry.kind)\r\n                            };\r\n                        });\r\n                        return [2 /*return*/, {\r\n                                suggestions: suggestions\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SuggestAdapter.prototype.resolveCompletionItem = function (model, _position, item, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var myItem, resource, position, offset, worker, details;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        myItem = item;\r\n                        resource = myItem.uri;\r\n                        position = myItem.position;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getCompletionEntryDetails(resource.toString(), offset, myItem.label)];\r\n                    case 2:\r\n                        details = _a.sent();\r\n                        if (!details || model.isDisposed()) {\r\n                            return [2 /*return*/, myItem];\r\n                        }\r\n                        return [2 /*return*/, {\r\n                                uri: resource,\r\n                                position: position,\r\n                                label: details.name,\r\n                                kind: SuggestAdapter.convertKind(details.kind),\r\n                                detail: displayPartsToString(details.displayParts),\r\n                                documentation: {\r\n                                    value: displayPartsToString(details.documentation)\r\n                                }\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SuggestAdapter.convertKind = function (kind) {\r\n        switch (kind) {\r\n            case Kind.primitiveType:\r\n            case Kind.keyword:\r\n                return monaco.languages.CompletionItemKind.Keyword;\r\n            case Kind.variable:\r\n            case Kind.localVariable:\r\n                return monaco.languages.CompletionItemKind.Variable;\r\n            case Kind.memberVariable:\r\n            case Kind.memberGetAccessor:\r\n            case Kind.memberSetAccessor:\r\n                return monaco.languages.CompletionItemKind.Field;\r\n            case Kind.function:\r\n            case Kind.memberFunction:\r\n            case Kind.constructSignature:\r\n            case Kind.callSignature:\r\n            case Kind.indexSignature:\r\n                return monaco.languages.CompletionItemKind.Function;\r\n            case Kind.enum:\r\n                return monaco.languages.CompletionItemKind.Enum;\r\n            case Kind.module:\r\n                return monaco.languages.CompletionItemKind.Module;\r\n            case Kind.class:\r\n                return monaco.languages.CompletionItemKind.Class;\r\n            case Kind.interface:\r\n                return monaco.languages.CompletionItemKind.Interface;\r\n            case Kind.warning:\r\n                return monaco.languages.CompletionItemKind.File;\r\n        }\r\n        return monaco.languages.CompletionItemKind.Property;\r\n    };\r\n    return SuggestAdapter;\r\n}(Adapter));\r\nexport { SuggestAdapter };\r\nvar SignatureHelpAdapter = /** @class */ (function (_super) {\r\n    __extends(SignatureHelpAdapter, _super);\r\n    function SignatureHelpAdapter() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.signatureHelpTriggerCharacters = ['(', ','];\r\n        return _this;\r\n    }\r\n    SignatureHelpAdapter.prototype.provideSignatureHelp = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, info, ret;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getSignatureHelpItems(resource.toString(), offset)];\r\n                    case 2:\r\n                        info = _a.sent();\r\n                        if (!info || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        ret = {\r\n                            activeSignature: info.selectedItemIndex,\r\n                            activeParameter: info.argumentIndex,\r\n                            signatures: []\r\n                        };\r\n                        info.items.forEach(function (item) {\r\n                            var signature = {\r\n                                label: '',\r\n                                parameters: []\r\n                            };\r\n                            signature.documentation = displayPartsToString(item.documentation);\r\n                            signature.label += displayPartsToString(item.prefixDisplayParts);\r\n                            item.parameters.forEach(function (p, i, a) {\r\n                                var label = displayPartsToString(p.displayParts);\r\n                                var parameter = {\r\n                                    label: label,\r\n                                    documentation: displayPartsToString(p.documentation)\r\n                                };\r\n                                signature.label += label;\r\n                                signature.parameters.push(parameter);\r\n                                if (i < a.length - 1) {\r\n                                    signature.label += displayPartsToString(item.separatorDisplayParts);\r\n                                }\r\n                            });\r\n                            signature.label += displayPartsToString(item.suffixDisplayParts);\r\n                            ret.signatures.push(signature);\r\n                        });\r\n                        return [2 /*return*/, {\r\n                                value: ret,\r\n                                dispose: function () { }\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return SignatureHelpAdapter;\r\n}(Adapter));\r\nexport { SignatureHelpAdapter };\r\n// --- hover ------\r\nvar QuickInfoAdapter = /** @class */ (function (_super) {\r\n    __extends(QuickInfoAdapter, _super);\r\n    function QuickInfoAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    QuickInfoAdapter.prototype.provideHover = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, info, documentation, tags, contents;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getQuickInfoAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        info = _a.sent();\r\n                        if (!info || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        documentation = displayPartsToString(info.documentation);\r\n                        tags = info.tags ? info.tags.map(function (tag) {\r\n                            var label = \"*@\" + tag.name + \"*\";\r\n                            if (!tag.text) {\r\n                                return label;\r\n                            }\r\n                            return label + (tag.text.match(/\\r\\n|\\n/g) ? ' \\n' + tag.text : \" - \" + tag.text);\r\n                        }).join('  \\n\\n') : '';\r\n                        contents = displayPartsToString(info.displayParts);\r\n                        return [2 /*return*/, {\r\n                                range: this._textSpanToRange(model, info.textSpan),\r\n                                contents: [{\r\n                                        value: '```js\\n' + contents + '\\n```\\n'\r\n                                    }, {\r\n                                        value: documentation + (tags ? '\\n\\n' + tags : '')\r\n                                    }]\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return QuickInfoAdapter;\r\n}(Adapter));\r\nexport { QuickInfoAdapter };\r\n// --- occurrences ------\r\nvar OccurrencesAdapter = /** @class */ (function (_super) {\r\n    __extends(OccurrencesAdapter, _super);\r\n    function OccurrencesAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    OccurrencesAdapter.prototype.provideDocumentHighlights = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, entries;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getOccurrencesAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        entries = _a.sent();\r\n                        if (!entries || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [2 /*return*/, entries.map(function (entry) {\r\n                                return {\r\n                                    range: _this._textSpanToRange(model, entry.textSpan),\r\n                                    kind: entry.isWriteAccess ? monaco.languages.DocumentHighlightKind.Write : monaco.languages.DocumentHighlightKind.Text\r\n                                };\r\n                            })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return OccurrencesAdapter;\r\n}(Adapter));\r\nexport { OccurrencesAdapter };\r\n// --- definition ------\r\nvar DefinitionAdapter = /** @class */ (function (_super) {\r\n    __extends(DefinitionAdapter, _super);\r\n    function DefinitionAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    DefinitionAdapter.prototype.provideDefinition = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, entries, result, _i, entries_1, entry, uri, refModel;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getDefinitionAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        entries = _a.sent();\r\n                        if (!entries || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        result = [];\r\n                        for (_i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\r\n                            entry = entries_1[_i];\r\n                            uri = Uri.parse(entry.fileName);\r\n                            refModel = monaco.editor.getModel(uri);\r\n                            if (refModel) {\r\n                                result.push({\r\n                                    uri: uri,\r\n                                    range: this._textSpanToRange(refModel, entry.textSpan)\r\n                                });\r\n                            }\r\n                        }\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return DefinitionAdapter;\r\n}(Adapter));\r\nexport { DefinitionAdapter };\r\n// --- references ------\r\nvar ReferenceAdapter = /** @class */ (function (_super) {\r\n    __extends(ReferenceAdapter, _super);\r\n    function ReferenceAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ReferenceAdapter.prototype.provideReferences = function (model, position, context, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, entries, result, _i, entries_2, entry, uri, refModel;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getReferencesAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        entries = _a.sent();\r\n                        if (!entries || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        result = [];\r\n                        for (_i = 0, entries_2 = entries; _i < entries_2.length; _i++) {\r\n                            entry = entries_2[_i];\r\n                            uri = Uri.parse(entry.fileName);\r\n                            refModel = monaco.editor.getModel(uri);\r\n                            if (refModel) {\r\n                                result.push({\r\n                                    uri: uri,\r\n                                    range: this._textSpanToRange(refModel, entry.textSpan)\r\n                                });\r\n                            }\r\n                        }\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return ReferenceAdapter;\r\n}(Adapter));\r\nexport { ReferenceAdapter };\r\n// --- outline ------\r\nvar OutlineAdapter = /** @class */ (function (_super) {\r\n    __extends(OutlineAdapter, _super);\r\n    function OutlineAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    OutlineAdapter.prototype.provideDocumentSymbols = function (model, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, worker, items, convert, result;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getNavigationBarItems(resource.toString())];\r\n                    case 2:\r\n                        items = _a.sent();\r\n                        if (!items || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        convert = function (bucket, item, containerLabel) {\r\n                            var result = {\r\n                                name: item.text,\r\n                                detail: '',\r\n                                kind: (outlineTypeTable[item.kind] || monaco.languages.SymbolKind.Variable),\r\n                                range: _this._textSpanToRange(model, item.spans[0]),\r\n                                selectionRange: _this._textSpanToRange(model, item.spans[0]),\r\n                                tags: [],\r\n                                containerName: containerLabel\r\n                            };\r\n                            if (item.childItems && item.childItems.length > 0) {\r\n                                for (var _i = 0, _a = item.childItems; _i < _a.length; _i++) {\r\n                                    var child = _a[_i];\r\n                                    convert(bucket, child, result.name);\r\n                                }\r\n                            }\r\n                            bucket.push(result);\r\n                        };\r\n                        result = [];\r\n                        items.forEach(function (item) { return convert(result, item); });\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return OutlineAdapter;\r\n}(Adapter));\r\nexport { OutlineAdapter };\r\nvar Kind = /** @class */ (function () {\r\n    function Kind() {\r\n    }\r\n    Kind.unknown = '';\r\n    Kind.keyword = 'keyword';\r\n    Kind.script = 'script';\r\n    Kind.module = 'module';\r\n    Kind.class = 'class';\r\n    Kind.interface = 'interface';\r\n    Kind.type = 'type';\r\n    Kind.enum = 'enum';\r\n    Kind.variable = 'var';\r\n    Kind.localVariable = 'local var';\r\n    Kind.function = 'function';\r\n    Kind.localFunction = 'local function';\r\n    Kind.memberFunction = 'method';\r\n    Kind.memberGetAccessor = 'getter';\r\n    Kind.memberSetAccessor = 'setter';\r\n    Kind.memberVariable = 'property';\r\n    Kind.constructorImplementation = 'constructor';\r\n    Kind.callSignature = 'call';\r\n    Kind.indexSignature = 'index';\r\n    Kind.constructSignature = 'construct';\r\n    Kind.parameter = 'parameter';\r\n    Kind.typeParameter = 'type parameter';\r\n    Kind.primitiveType = 'primitive type';\r\n    Kind.label = 'label';\r\n    Kind.alias = 'alias';\r\n    Kind.const = 'const';\r\n    Kind.let = 'let';\r\n    Kind.warning = 'warning';\r\n    return Kind;\r\n}());\r\nexport { Kind };\r\nvar outlineTypeTable = Object.create(null);\r\noutlineTypeTable[Kind.module] = monaco.languages.SymbolKind.Module;\r\noutlineTypeTable[Kind.class] = monaco.languages.SymbolKind.Class;\r\noutlineTypeTable[Kind.enum] = monaco.languages.SymbolKind.Enum;\r\noutlineTypeTable[Kind.interface] = monaco.languages.SymbolKind.Interface;\r\noutlineTypeTable[Kind.memberFunction] = monaco.languages.SymbolKind.Method;\r\noutlineTypeTable[Kind.memberVariable] = monaco.languages.SymbolKind.Property;\r\noutlineTypeTable[Kind.memberGetAccessor] = monaco.languages.SymbolKind.Property;\r\noutlineTypeTable[Kind.memberSetAccessor] = monaco.languages.SymbolKind.Property;\r\noutlineTypeTable[Kind.variable] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.const] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.localVariable] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.variable] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.function] = monaco.languages.SymbolKind.Function;\r\noutlineTypeTable[Kind.localFunction] = monaco.languages.SymbolKind.Function;\r\n// --- formatting ----\r\nvar FormatHelper = /** @class */ (function (_super) {\r\n    __extends(FormatHelper, _super);\r\n    function FormatHelper() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FormatHelper._convertOptions = function (options) {\r\n        return {\r\n            ConvertTabsToSpaces: options.insertSpaces,\r\n            TabSize: options.tabSize,\r\n            IndentSize: options.tabSize,\r\n            IndentStyle: IndentStyle.Smart,\r\n            NewLineCharacter: '\\n',\r\n            InsertSpaceAfterCommaDelimiter: true,\r\n            InsertSpaceAfterSemicolonInForStatements: true,\r\n            InsertSpaceBeforeAndAfterBinaryOperators: true,\r\n            InsertSpaceAfterKeywordsInControlFlowStatements: true,\r\n            InsertSpaceAfterFunctionKeywordForAnonymousFunctions: true,\r\n            InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis: false,\r\n            InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets: false,\r\n            InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces: false,\r\n            PlaceOpenBraceOnNewLineForControlBlocks: false,\r\n            PlaceOpenBraceOnNewLineForFunctions: false\r\n        };\r\n    };\r\n    FormatHelper.prototype._convertTextChanges = function (model, change) {\r\n        return {\r\n            text: change.newText,\r\n            range: this._textSpanToRange(model, change.span)\r\n        };\r\n    };\r\n    return FormatHelper;\r\n}(Adapter));\r\nexport { FormatHelper };\r\nvar FormatAdapter = /** @class */ (function (_super) {\r\n    __extends(FormatAdapter, _super);\r\n    function FormatAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FormatAdapter.prototype.provideDocumentRangeFormattingEdits = function (model, range, options, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, startOffset, endOffset, worker, edits;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        startOffset = model.getOffsetAt({ lineNumber: range.startLineNumber, column: range.startColumn });\r\n                        endOffset = model.getOffsetAt({ lineNumber: range.endLineNumber, column: range.endColumn });\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getFormattingEditsForRange(resource.toString(), startOffset, endOffset, FormatHelper._convertOptions(options))];\r\n                    case 2:\r\n                        edits = _a.sent();\r\n                        if (!edits || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [2 /*return*/, edits.map(function (edit) { return _this._convertTextChanges(model, edit); })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return FormatAdapter;\r\n}(FormatHelper));\r\nexport { FormatAdapter };\r\nvar FormatOnTypeAdapter = /** @class */ (function (_super) {\r\n    __extends(FormatOnTypeAdapter, _super);\r\n    function FormatOnTypeAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(FormatOnTypeAdapter.prototype, \"autoFormatTriggerCharacters\", {\r\n        get: function () {\r\n            return [';', '}', '\\n'];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FormatOnTypeAdapter.prototype.provideOnTypeFormattingEdits = function (model, position, ch, options, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, edits;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getFormattingEditsAfterKeystroke(resource.toString(), offset, ch, FormatHelper._convertOptions(options))];\r\n                    case 2:\r\n                        edits = _a.sent();\r\n                        if (!edits || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [2 /*return*/, edits.map(function (edit) { return _this._convertTextChanges(model, edit); })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return FormatOnTypeAdapter;\r\n}(FormatHelper));\r\nexport { FormatOnTypeAdapter };\r\n// --- code actions ------\r\nvar CodeActionAdaptor = /** @class */ (function (_super) {\r\n    __extends(CodeActionAdaptor, _super);\r\n    function CodeActionAdaptor() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    CodeActionAdaptor.prototype.provideCodeActions = function (model, range, context, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, start, end, formatOptions, errorCodes, worker, codeFixes, actions;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        start = model.getOffsetAt({ lineNumber: range.startLineNumber, column: range.startColumn });\r\n                        end = model.getOffsetAt({ lineNumber: range.endLineNumber, column: range.endColumn });\r\n                        formatOptions = FormatHelper._convertOptions(model.getOptions());\r\n                        errorCodes = context.markers.filter(function (m) { return m.code; }).map(function (m) { return m.code; }).map(Number);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getCodeFixesAtPosition(resource.toString(), start, end, errorCodes, formatOptions)];\r\n                    case 2:\r\n                        codeFixes = _a.sent();\r\n                        if (!codeFixes || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        actions = codeFixes.filter(function (fix) {\r\n                            // Removes any 'make a new file'-type code fix\r\n                            return fix.changes.filter(function (change) { return change.isNewFile; }).length === 0;\r\n                        }).map(function (fix) {\r\n                            return _this._tsCodeFixActionToMonacoCodeAction(model, context, fix);\r\n                        });\r\n                        return [2 /*return*/, {\r\n                                actions: actions,\r\n                                dispose: function () { }\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    CodeActionAdaptor.prototype._tsCodeFixActionToMonacoCodeAction = function (model, context, codeFix) {\r\n        var edits = [];\r\n        for (var _i = 0, _a = codeFix.changes; _i < _a.length; _i++) {\r\n            var change = _a[_i];\r\n            for (var _b = 0, _c = change.textChanges; _b < _c.length; _b++) {\r\n                var textChange = _c[_b];\r\n                edits.push({\r\n                    resource: model.uri,\r\n                    edit: {\r\n                        range: this._textSpanToRange(model, textChange.span),\r\n                        text: textChange.newText\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        var action = {\r\n            title: codeFix.description,\r\n            edit: { edits: edits },\r\n            diagnostics: context.markers,\r\n            kind: \"quickfix\"\r\n        };\r\n        return action;\r\n    };\r\n    return CodeActionAdaptor;\r\n}(FormatHelper));\r\nexport { CodeActionAdaptor };\r\n// --- rename ----\r\nvar RenameAdapter = /** @class */ (function (_super) {\r\n    __extends(RenameAdapter, _super);\r\n    function RenameAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    RenameAdapter.prototype.provideRenameEdits = function (model, position, newName, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, fileName, offset, worker, renameInfo, renameLocations, edits, _i, renameLocations_1, renameLocation;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        fileName = resource.toString();\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getRenameInfo(fileName, offset, { allowRenameOfImportPath: false })];\r\n                    case 2:\r\n                        renameInfo = _a.sent();\r\n                        if (renameInfo.canRename === false) { // use explicit comparison so that the discriminated union gets resolved properly\r\n                            return [2 /*return*/, {\r\n                                    edits: [],\r\n                                    rejectReason: renameInfo.localizedErrorMessage\r\n                                }];\r\n                        }\r\n                        if (renameInfo.fileToRename !== undefined) {\r\n                            throw new Error(\"Renaming files is not supported.\");\r\n                        }\r\n                        return [4 /*yield*/, worker.findRenameLocations(fileName, offset, /*strings*/ false, /*comments*/ false, /*prefixAndSuffix*/ false)];\r\n                    case 3:\r\n                        renameLocations = _a.sent();\r\n                        if (!renameLocations || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        edits = [];\r\n                        for (_i = 0, renameLocations_1 = renameLocations; _i < renameLocations_1.length; _i++) {\r\n                            renameLocation = renameLocations_1[_i];\r\n                            edits.push({\r\n                                resource: monaco.Uri.parse(renameLocation.fileName),\r\n                                edit: {\r\n                                    range: this._textSpanToRange(model, renameLocation.textSpan),\r\n                                    text: newName\r\n                                }\r\n                            });\r\n                        }\r\n                        return [2 /*return*/, { edits: edits }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return RenameAdapter;\r\n}(Adapter));\r\nexport { RenameAdapter };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { WorkerManager } from './workerManager.js';\r\nimport * as languageFeatures from './languageFeatures.js';\r\nvar javaScriptWorker;\r\nvar typeScriptWorker;\r\nexport function setupTypeScript(defaults) {\r\n    typeScriptWorker = setupMode(defaults, 'typescript');\r\n}\r\nexport function setupJavaScript(defaults) {\r\n    javaScriptWorker = setupMode(defaults, 'javascript');\r\n}\r\nexport function getJavaScriptWorker() {\r\n    return new Promise(function (resolve, reject) {\r\n        if (!javaScriptWorker) {\r\n            return reject(\"JavaScript not registered!\");\r\n        }\r\n        resolve(javaScriptWorker);\r\n    });\r\n}\r\nexport function getTypeScriptWorker() {\r\n    return new Promise(function (resolve, reject) {\r\n        if (!typeScriptWorker) {\r\n            return reject(\"TypeScript not registered!\");\r\n        }\r\n        resolve(typeScriptWorker);\r\n    });\r\n}\r\nfunction setupMode(defaults, modeId) {\r\n    var client = new WorkerManager(modeId, defaults);\r\n    var worker = function () {\r\n        var uris = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            uris[_i] = arguments[_i];\r\n        }\r\n        return client.getLanguageServiceWorker.apply(client, uris);\r\n    };\r\n    monaco.languages.registerCompletionItemProvider(modeId, new languageFeatures.SuggestAdapter(worker));\r\n    monaco.languages.registerSignatureHelpProvider(modeId, new languageFeatures.SignatureHelpAdapter(worker));\r\n    monaco.languages.registerHoverProvider(modeId, new languageFeatures.QuickInfoAdapter(worker));\r\n    monaco.languages.registerDocumentHighlightProvider(modeId, new languageFeatures.OccurrencesAdapter(worker));\r\n    monaco.languages.registerDefinitionProvider(modeId, new languageFeatures.DefinitionAdapter(worker));\r\n    monaco.languages.registerReferenceProvider(modeId, new languageFeatures.ReferenceAdapter(worker));\r\n    monaco.languages.registerDocumentSymbolProvider(modeId, new languageFeatures.OutlineAdapter(worker));\r\n    monaco.languages.registerDocumentRangeFormattingEditProvider(modeId, new languageFeatures.FormatAdapter(worker));\r\n    monaco.languages.registerOnTypeFormattingEditProvider(modeId, new languageFeatures.FormatOnTypeAdapter(worker));\r\n    monaco.languages.registerCodeActionProvider(modeId, new languageFeatures.CodeActionAdaptor(worker));\r\n    monaco.languages.registerRenameProvider(modeId, new languageFeatures.RenameAdapter(worker));\r\n    new languageFeatures.DiagnosticsAdapter(defaults, modeId, worker);\r\n    return worker;\r\n}\r\n"],"sourceRoot":""}