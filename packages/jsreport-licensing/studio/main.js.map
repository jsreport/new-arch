{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./studio/main_dev.js","webpack:///external \"Studio\""],"names":["renderLicenseType","licensingInfo","unreachable","type","pendingExpiration","paymentType","expiresOn","toLocaleDateString","validatedForVersion","PaymentNote","Studio","readyListeners","push","extensions","options","trialModal","openModal","licenseInfoModal","license","pendingExpirationModal","getAllEntities","filter","e","__entitySet","__isNew","length","interval","setInterval","clearInterval","now","Date","setDate","getDate","api","post","then","m","status","setTimeout","message","addToolbarComponent","props","textTransform"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import Studio from 'jsreport-studio'\r\n\r\nfunction renderLicenseType (licensingInfo) {\r\n  if (licensingInfo.unreachable) {\r\n    return <p>\r\n        The licensing server was not reachable during the instance startup. The instance now runs in the enterprise mode and the license validation will be performed again during the next restart.\r\n    </p>\r\n  }\r\n\r\n  if (licensingInfo.type === 'subscription') {\r\n    if (licensingInfo.pendingExpiration === true) {\r\n      return <div>\r\n        <p>\r\n        The subscription is no longer active probably due to failed payment or cancellation. The subscription can be used for maximum one month in inactive state.\r\n        </p>\r\n        <PaymentNote paymentType={licensingInfo.paymentType} />\r\n      </div>\r\n    }\r\n\r\n    return <div>\r\n      <p>\r\n      The subscription renewal is planned on {licensingInfo.expiresOn.toLocaleDateString()} and the license will be again validated afterwards.\r\n      </p>\r\n      <PaymentNote paymentType={licensingInfo.paymentType} />\r\n    </div>\r\n  }\r\n\r\n  if (licensingInfo.type === 'perpetual') {\r\n    return <p>Perpetual license is validated for the version {licensingInfo.validatedForVersion} with free upgrades to the versions released before {licensingInfo.expiresOn.toLocaleDateString()}.\r\n      The license will be remotely validated again if the instance is upgraded to a different version.</p>\r\n  }\r\n\r\n  if (licensingInfo.type === 'trial') {\r\n    return <p>The trial license expires on {licensingInfo.expiresOn.toLocaleDateString()}.\r\n      You will need to purchase enterprise license to be able to store more than 5 templates afterwards.</p>\r\n  }\r\n\r\n  if (licensingInfo.type === 'free') {\r\n    return <p>You can use up to 5 templates for free.</p>\r\n  }\r\n}\r\n\r\nfunction PaymentNote ({ paymentType }) {\r\n  if (paymentType === 'gumroad') {\r\n    return <p>\r\n        You can find further information about payments in the <a href='https://gumroad.com/library' target='_blank'>gumroad library</a>.`\r\n    </p>\r\n  }\r\n\r\n  if (paymentType === 'manual') {\r\n    return <p>\r\n      The license is payed through manual invoices and bank transfers. Please contact <a href='mailto: support@jsreport.net'>support@jsreport.net</a> to get further information.\r\n    </p>\r\n  }\r\n\r\n  if (paymentType === 'braintree') {\r\n    return <p>\r\n      You can find further information about payments in the <a href='https://jsreport.net/payments/customer' target='_blank'>customer portal</a>.\r\n    </p>\r\n  }\r\n\r\n  return <span />\r\n}\r\n\r\nStudio.readyListeners.push(async () => {\r\n  var licensingInfo = Studio.extensions['licensing'].options\r\n\r\n  const trialModal = () => Studio.openModal(() => <div>\r\n    <p>\r\n      Free license is limited to maximum 5 templates.\r\n      Your jsreport instance is now running in one month trial. Please buy\r\n      the enterprise license if you want to continue using jsreport after the trial expires.\r\n    </p>\r\n\r\n    <p>\r\n      The instructions for buying enterprise license can be found <a href='http://jsreport.net/buy' target='_blank'>here</a>.\r\n    </p>\r\n  </div>)\r\n\r\n  const licenseInfoModal = () => Studio.openModal(() => <div>\r\n    <h2>{licensingInfo.license} license</h2>\r\n    {renderLicenseType(licensingInfo)}\r\n    <p>More information about licensing and pricing can be found <a href='http://jsreport.net/buy' target='_blank'>here</a>.</p>\r\n  </div>)\r\n\r\n  const pendingExpirationModal = () => Studio.openModal(() => <div>\r\n    <h2>subscription has expired</h2>\r\n    <p>\r\n      The subscription is no longer active probably due to failed payment or cancellation.\r\n      The subscription can be used for maximum one month in inactive state.\r\n    </p>\r\n    <PaymentNote paymentType={licensingInfo.paymentType} />\r\n  </div>)\r\n\r\n  if (licensingInfo.type === 'trial' && Studio.getAllEntities().filter((e) => e.__entitySet === 'templates' && !e.__isNew).length > 5) {\r\n    trialModal()\r\n  }\r\n\r\n  if (licensingInfo.type === 'subscription' && licensingInfo.pendingExpiration === true) {\r\n    pendingExpirationModal()\r\n  }\r\n\r\n  if (licensingInfo.license === 'free') {\r\n    const interval = setInterval(() => {\r\n      if (Studio.getAllEntities().filter((e) => e.__entitySet === 'templates' && !e.__isNew).length > 5) {\r\n        clearInterval(interval)\r\n        trialModal()\r\n        licensingInfo.type = licensingInfo.license = 'trial'\r\n        var now = new Date()\r\n        now.setDate(now.getDate() + 30)\r\n        licensingInfo.expiresOn = now\r\n        Studio.api.post('/api/licensing/trial', {}).then(m => {\r\n          if (m.status === 1) {\r\n            setTimeout(() => Studio.openModal(() => <div>{m.message}</div>), 5000)\r\n          }\r\n        })\r\n      }\r\n    }, 10000)\r\n  }\r\n\r\n  Studio.addToolbarComponent((props) => <div\r\n    className='toolbar-button' onClick={() => licenseInfoModal()}>\r\n    <div style={{textTransform: 'capitalize'}}><i className='fa fa-gavel' /> {licensingInfo.license} <i className='fa fa-info-circle' /></div>\r\n  </div>, 'settings')\r\n})\r\n","module.exports = Studio;"],"sourceRoot":""}